<!-- Criando variavel local para indicar que o angular deve ajudar a gerenciar esse formulário. Usando a variavel # o formulario será referenciado como todo-->
<form
    #f='ngForm'
    (ngSubmit)="onSubmit(f)"
>
    <div class="form-group row">
        <div class="col-sm-12">
            <label
                for="nome"
                class="form-label"
            >Nome</label>
        </div>
        <div class="col-sm-12">
            <input
                type="text"
                name="nome"
                class="form-control "
                placeholder="Nome"
                aria-label="nome"
                aria-describedby="basic-addon1"
                id="nome"
                [(ngModel)]="usuario.nome"
                required
                #nome="ngModel"
                [ngClass]="aplicaCssErro(nome)"
            >
            <app-campo-control-erro
                [mostrarErro]="verificaValidTouched(nome)"
                mensagemErro="Nome é obrigatório"
            ></app-campo-control-erro>
        </div>

        <!-- <div>
            {{nome.className}}
        </div> -->
    </div>
    <div class="form-group row">
        <div class="col-sm-12">
            <label
                for="email"
                class="form-label"
            >Email</label>
        </div>
        <div class="col-sm-12">

            <div class="input-group mb-3">
                <span
                    class="input-group-text"
                    id="basic-addon2"
                >@</span>
                <input
                    type="email"
                    name="email"
                    class="form-control"
                    placeholder="Email"
                    aria-label="email"
                    aria-describedby="basic-addon1"
                    id="email"
                    placeholder="nome@email.com"
                    [(ngModel)]='usuario.email'
                    required
                    email
                    #email="ngModel"
                    [ngClass]="aplicaCssErro(email)"
                >
            </div>
            <app-campo-control-erro
                [mostrarErro]="verificaValidTouched(email)"
                mensagemErro="Email é obrigatório"
            ></app-campo-control-erro>
        </div>
    </div>
    <div ngModelGroup="endereco">
        <div class="form-group row">
            <div class="col-sm-3">
                <label
                    for="cep"
                    class="control-label"
                >CEP</label>
                <input
                    type="text"
                    class="form-control"
                    id="cep"
                    name="cep"
                    ngModel
                    required
                    #cep="ngModel"
                    [ngClass]="aplicaCssErro(cep)"
                    (blur)="consultaCEP(cep.value, f)"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(cep)"
                    mensagemErro="Cep é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-3">
                <label
                    for="numero"
                    class="control-label"
                >Número</label>
                <input
                    type="text"
                    class="form-control"
                    id="numero"
                    name="numero"
                    ngModel
                    required
                    #numero="ngModel"
                    [ngClass]="aplicaCssErro(numero)"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(numero)"
                    mensagemErro="Número é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-6">
                <label
                    for="complemento"
                    class="control-label"
                >Complemento</label>
                <input
                    type="text"
                    class="form-control"
                    id="complemento"
                    name="complemento"
                    ngModel
                    required
                    #complemento="ngModel"
                >
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-12">
                <label
                    for="rua"
                    class="control-label"
                >Rua</label>
                <input
                    type="text"
                    class="form-control"
                    [class.is-invalid]="!rua.valid && rua.touched"
                    id="rua"
                    name="rua"
                    ngModel
                    required
                    #rua="ngModel"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(rua)"
                    mensagemErro="Rua é obrigatório"
                ></app-campo-control-erro>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-5">
                <label
                    for="bairro"
                    class="control-label"
                >Bairro</label>
                <input
                    type="text"
                    class="form-control"
                    id="bairro"
                    name="bairro"
                    ngModel
                    required
                    #bairro="ngModel"
                    readonly
                    [ngClass]="aplicaCssErro(bairro)"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(bairro)"
                    mensagemErro="Bairro é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-4">
                <label
                    for="cidade"
                    class="control-label"
                >Cidade</label>
                <input
                    type="text"
                    class="form-control"
                    id="cidade"
                    name="cidade"
                    ngModel
                    required
                    #cidade="ngModel"
                    readonly
                    [ngClass]="aplicaCssErro(cidade)"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(cidade)"
                    mensagemErro="Cidade é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-3">
                <label
                    for="estado"
                    class="control-label"
                >Estado</label>
                <input
                    type="text"
                    class="form-control"
                    id="estado"
                    name="estado"
                    ngModel
                    required
                    #estado="ngModel"
                    readonly
                    [ngClass]="aplicaCssErro(estado)"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched(estado)"
                    mensagemErro="Estado é obrigatório"
                ></app-campo-control-erro>
            </div>
        </div>
    </div>
    <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!f.valid"
    >Submit</button>
    <app-form-debug [form]="f"></app-form-debug>
</form>