<form
    class="form-horizontal"
    [formGroup]="formulario"
    (ngSubmit)="onSubmit()"
>
    <div class="form-group row">
        <div class="col-sm-12">
            <label
                for="nome"
                class="form-label"
            >Nome</label>
        </div>
        <div class="col-sm-12">
            <input
                type="text"
                formControlName="nome"
                class="form-control"
                placeholder="Nome"
                aria-label="nome"
                aria-describedby="basic-addon1"
                id="nome"
                [ngClass]="aplicarCssErro('nome')"
            >
            <app-campo-control-erro
                [mostrarErro]="verificaValidTouched('nome') "
                mensagemErro="Nome é obrigatório"
            ></app-campo-control-erro>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-12">
            <label
                for="email"
                class="form-label"
            >Email</label>
        </div>
        <div class="col-sm-12">

            <div class="input-group">
                <span
                    class="input-group-text"
                    id="basic-addon2"
                >@</span>
                <input
                    type="email"
                    formControlName="email"
                    class="form-control"
                    placeholder="Email"
                    aria-label="email"
                    aria-describedby="basic-addon1"
                    id="email"
                    placeholder="nome@email.com"
                    [ngClass]="aplicarCssErro('email')"
                >
            </div>
            <app-campo-control-erro
                [mostrarErro]="verificaValidTouched('email') "
                mensagemErro="Email é obrigatório"
            ></app-campo-control-erro>
            <app-campo-control-erro
                [mostrarErro]="verificaEmailInvalido()"
                mensagemErro="Email inválido"
            ></app-campo-control-erro>
        </div>
    </div>

    <div formGroupName="endereco">
        <div class="form-group row">
            <div class="col-sm-3">
                <label
                    for="cep"
                    class="control-label"
                >CEP</label>
                <input
                    type="text"
                    class="form-control"
                    id="cep"
                    [ngClass]="aplicarCssErro('endereco.cep')"
                    formControlName="cep"
                    (blur)="consultaCEP()"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.cep')"
                    mensagemErro="Cep é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-3">
                <label
                    for="numero"
                    class="control-label"
                >Número</label>
                <input
                    type="text"
                    class="form-control"
                    id="numero"
                    [ngClass]="aplicarCssErro('endereco.numero')"
                    formControlName="numero"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.numero')"
                    mensagemErro="Número é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-6">
                <label
                    for="complemento"
                    class="control-label"
                >Complemento</label>
                <input
                    type="text"
                    class="form-control"
                    id="complemento"
                    [ngClass]="aplicarCssErro('endereco.complemento')"
                    formControlName="complemento"
                >
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-12">
                <label
                    for="rua"
                    class="control-label"
                >Rua</label>
                <input
                    type="text"
                    class="form-control"
                    id="rua"
                    [ngClass]="aplicarCssErro('endereco.rua')"
                    formControlName="rua"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.rua')"
                    mensagemErro="Rua é obrigatório"
                ></app-campo-control-erro>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-5">
                <label
                    for="bairro"
                    class="control-label"
                >Bairro</label>
                <input
                    type="text"
                    class="form-control"
                    id="bairro"
                    [ngClass]="aplicarCssErro('endereco.bairro')"
                    formControlName="bairro"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.bairro')"
                    mensagemErro="Bairro é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-4">
                <label
                    for="cidade"
                    class="control-label"
                >Cidade</label>
                <input
                    type="text"
                    class="form-control"
                    id="cidade"
                    [ngClass]="aplicarCssErro('endereco.cidade')"
                    formControlName="cidade"
                >
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.cidade')"
                    mensagemErro="Cidade é obrigatório"
                ></app-campo-control-erro>
            </div>

            <div class="col-sm-3">
                <label
                    for="estado"
                    class="control-label"
                >Estado</label>
                <select
                    class="form-control"
                    id="estado"
                    [ngClass]="aplicarCssErro('endereco.estado')"
                    formControlName="estado"
                >
                    <option
                        *ngFor="let estado of estados | async"
                        [value]="estado.sigla"
                    >{{ estado.nome}}</option>
                </select>
                <app-campo-control-erro
                    [mostrarErro]="verificaValidTouched('endereco.estado')"
                    mensagemErro="Estado é obrigatório"
                ></app-campo-control-erro>
            </div>
        </div>
    </div>

    <div>
        <button
            type="submit"
            class="btn btn-primary"
        >Submit</button>
        <button
            class="btn"
            (click)="resetarFormulario()"
        >Cancelar</button>
    </div>
    <app-form-debug [form]="formulario"></app-form-debug>
</form>